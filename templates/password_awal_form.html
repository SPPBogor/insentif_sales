{% extends "base.html" %}
{% block content %}
<div class="container mt-4" style="max-width: 720px;">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h4 class="mb-0">{{ 'Edit Target Awal' if row else 'Tambah Target Awal' }}</h4>
    <a href="{{ url_for('password_awal_list') }}" class="btn btn-light btn-sm">Kembali</a>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <form method="post" novalidate>
        <div class="form-group">
          <label for="bulan">Bulan <span class="text-danger">*</span></label>
          <input type="text" class="form-control" id="bulan" name="bulan"
                 placeholder="YYYY-MM (contoh: 2025-10)"
                 value="{{ row.bulan if row else '' }}" required>
          <small class="form-text text-muted">Gunakan format <code>YYYY-MM</code>.</small>
        </div>

        <div class="form-group">
          <label for="salesman_id">Salesman <span class="text-danger">*</span></label>
          <select class="form-control" id="salesman_id" name="salesman_id" required>
            <option value="" disabled {{ 'selected' if not row }}>— Pilih Salesman —</option>
            {% for s in salesmen %}
              <option value="{{ s.id }}"
                {% if row and s.id == row.salesman_id %}selected{% endif %}>
                {{ s.name }} ({{ s.divisi }}{% if s.area %} • {{ s.area }}{% endif %})
              </option>
            {% endfor %}
          </select>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="target_amount">Target Awal <span class="text-danger">*</span></label>
            <input type="number" step="0.01" min="0" class="form-control" id="target_amount"
                   name="target_amount" value="{{ row.target_amount if row else '' }}" required>
          </div>
          <div class="form-group col-md-6">
            <label for="actual_amount">Aktual</label>
            <input type="number" step="0.01" min="0" class="form-control" id="actual_amount"
                   name="actual_amount" value="{{ row.actual_amount if row else 0 }}">
          </div>
        </div>

        <div class="d-flex justify-content-end">
          <a href="{{ url_for('password_awal_list') }}" class="btn btn-outline-secondary mr-2">Batal</a>
          <button type="submit" class="btn btn-primary">Simpan</button>
        </div>
      </form>
    </div>
  </div>

  <div class="alert alert-secondary mt-3 mb-0">
    <strong>Tips:</strong> agar insentif Penjualan & Tagihan aktif, pastikan Aktual / Target ≥ persentase
    “password_awal” di menu <a href="{{ url_for('thresholds_list') }}">Thresholds</a>.
  </div>
</div>
{% endblock %}
